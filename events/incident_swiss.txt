namespace = incident_swiss

country_event = {
	id = incident_swiss.1
	title = incident_swiss.1.t
	desc = incident_swiss.1.d
	picture = CITY_VIEW_eventPicture

	mean_time_to_happen = {
		days = 1
	}
	fire_only_once = yes

	trigger = {
		exists = BRN
		OR = {
			BRN = {
				num_of_subjects = 20
			}
		is_year = 1490
		}
		
	}

	option = {
		name = "incident_swiss.1.a"
		emperor = {
			set_imperial_incident = incident_swiss
		}
	}
}

country_event = {
	id = incident_swiss.2
	title = incident_swiss.2.t
	desc = incident_swiss.2.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes

	option = {
		name = "incident_swiss.2.a"
		ROOT = {
			declare_war_with_cb = {
				casus_belli = cb_annex
				who = BRN
			}
		}
	}

	option = {
		name = "incident_swiss.2.b"
		BRN = {
			country_event = {
				id = incident_swiss.3
			}
		}
	}

	option = {
		name = "incident_swiss.2.c"
		add_prestige = -10
	}
}

country_event = {
	id = incident_swiss.3
	title = incident_swiss.3.t
	desc = incident_swiss.3.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes

	option = {
		name = "incident_swiss.3.a"
		every_owned_province = {
			set_in_empire = yes
		}
		set_in_empire = yes

		every_subject_country = {
			every_owned_province = {
				set_in_empire = yes
			}
			set_in_empire = yes
		}

		BUR = {
			set_country_flag = finished_swiss_incident
		}
	}

	option = {
		name = "incident_swiss.3.b"
		BUR = {
			add_opinion = {
				who = BRN
				modifier = opinion_declined_emperor_province
			}
		}

		BRN = {
			every_owned_province = {
				add_permanent_claim = BUR
			}

			every_subject_country = {
				every_owned_province = {
					add_permanent_claim = BUR
				}
			}
		}
	}
}

country_event = {
	id = incident_swiss.4
	title = incident_swiss.4.t
	desc = incident_swiss.4.d
	picture = CITY_VIEW_eventPicture
	fire_only_once = yes
	mean_time_to_happen = {
		days = 5
	}

	trigger = {
		is_emperor = yes
		NOT = {tag = BRN}
		owns = 165
		any_subject_country = {
			primary_culture = swiss
		}
	}

	option = {
		name = "incident_swiss.4.a"
		every_subject_country = {
			limit = {
				primary_culture = swiss
			}
			
			set_in_empire = yes
			grant_independence = yes
			set_country_flag = finished_swiss_incident
		}
	}

	option = {
		name = "incident_swiss.4.b"

		set_country_flag = finished_swiss_incident

		every_owned_province = {
			limit = {
				culture = swiss
			}
			add_core = SWI
			cede_province = SWI
		}

		every_subject_country = {
			every_owned_province = {
				limit = {
					culture = swiss
				}
				add_core = SWI
				cede_province = SWI
			}
		}

		create_march = SWI
		SWI = {
			set_in_empire = yes
			every_owned_province = {
				set_in_empire = yes
			}
		}
	}
}